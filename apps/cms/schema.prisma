// This file is automatically generated by Keystone, do not modify it manually.
// Modify your Keystone config when you want to change this.

datasource sqlite {
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
  provider          = "sqlite"
}

generator client {
  provider = "prisma-client-js"
  output   = "node_modules/.prisma/client"
}

model user {
  id        String    @id @default(cuid())
  email     String    @unique @default("")
  password  String
  orders    order[]   @relation("order_user")
  createdAt DateTime?
  updatedAt DateTime?
}

model order {
  id           String      @id @default(cuid())
  isProccessed Boolean     @default(false)
  user         user?       @relation("order_user", fields: [userId], references: [id])
  userId       String?     @map("user")
  address      String      @default("")
  zipCode      String      @default("")
  country      String      @default("")
  archived     Boolean     @default(false)
  orderItems   orderItem[] @relation("orderItem_order")
  createdAt    DateTime?
  updatedAt    DateTime?

  @@index([userId])
}

model orderItem {
  id          String     @id @default(cuid())
  amount      Int
  order       order?     @relation("orderItem_order", fields: [orderId], references: [id])
  orderId     String?    @map("order")
  stockItem   stockItem? @relation("orderItem_stockItem", fields: [stockItemId], references: [id])
  stockItemId String?    @map("stockItem")
  createdAt   DateTime?
  updatedAt   DateTime?

  @@index([orderId])
  @@index([stockItemId])
}

model product {
  id          String      @id @default(cuid())
  name        String      @unique @default("")
  description String      @default("")
  price       Int
  stockItems  stockItem[] @relation("stockItem_product")
  images      image[]     @relation("image_product")
  createdAt   DateTime?
  updatedAt   DateTime?
}

model stock {
  id         String      @id @default(cuid())
  name       String      @unique @default("")
  address    String      @default("")
  zipCode    String      @default("")
  country    String      @default("")
  stockItems stockItem[] @relation("stockItem_stock")
  createdAt  DateTime?
  updatedAt  DateTime?
}

model stockItem {
  id         String      @id @default(cuid())
  amount     Int
  stock      stock?      @relation("stockItem_stock", fields: [stockId], references: [id])
  stockId    String?     @map("stock")
  product    product?    @relation("stockItem_product", fields: [productId], references: [id])
  productId  String?     @map("product")
  orderItems orderItem[] @relation("orderItem_stockItem")
  createdAt  DateTime?
  updatedAt  DateTime?

  @@index([stockId])
  @@index([productId])
}

model image {
  id              String   @id @default(cuid())
  image_filesize  Int?
  image_extension String?
  image_width     Int?
  image_height    Int?
  image_id        String?
  product         product? @relation("image_product", fields: [productId], references: [id])
  productId       String?  @map("product")

  @@index([productId])
}